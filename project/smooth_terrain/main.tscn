[gd_scene load_steps=27 format=3 uid="uid://d3yg8jlxa54m1"]

[ext_resource type="Texture2D" uid="uid://dbyfjxd8tuccq" path="res://smooth_terrain/assets/materials/Stone Dirt Wall/StoneDirtWall_normal.png" id="2_6c2kk"]
[ext_resource type="Texture2D" uid="uid://bah3m1tg3vybk" path="res://smooth_terrain/assets/materials/Rock Wall/RockWall_baseColor.png" id="2_erh7w"]
[ext_resource type="Texture2D" uid="uid://uv8ut1kofxit" path="res://smooth_terrain/assets/materials/Stone Dirt Wall/StoneDirtWall_baseColor.png" id="2_hlu6d"]
[ext_resource type="Script" uid="uid://beghwcxyaampl" path="res://smooth_terrain/terrain.gd" id="2_muprf"]
[ext_resource type="Shader" uid="uid://cuhrhqjasqqyn" path="res://smooth_terrain/transvoxel_terrain.gdshader" id="2_oexva"]
[ext_resource type="Texture2D" uid="uid://brng144p8bvri" path="res://smooth_terrain/assets/materials/Rock Wall/RockWall_normal.png" id="3_md6sa"]
[ext_resource type="Script" uid="uid://iema3ac4rayl" path="res://smooth_terrain/players.gd" id="3_muprf"]
[ext_resource type="Texture2D" uid="uid://bmxt0r6tlmpj6" path="res://smooth_terrain/assets/materials/Ground Stone Puddle/StoneDirtFloor_diffuse.png" id="4_erh7w"]
[ext_resource type="PackedScene" uid="uid://clwevfsvq22e8" path="res://smooth_terrain/multiplayer_menu.tscn" id="4_oexva"]
[ext_resource type="Texture2D" uid="uid://cevx3olsxymfe" path="res://smooth_terrain/assets/materials/Ground Stone Puddle/StoneDirtFloor_normal.png" id="4_tgnr8"]
[ext_resource type="Texture2D" uid="uid://16mdxvr0q3uf" path="res://smooth_terrain/assets/materials/Grass 01/Grass001_normal.png" id="5_1cem4"]
[ext_resource type="PackedScene" uid="uid://2wkh70pbpuoy" path="res://smooth_terrain/block.tscn" id="5_muprf"]
[ext_resource type="Texture2D" uid="uid://bk4ett6ebf0c5" path="res://smooth_terrain/grass_albedo.png" id="9_6c2kk"]
[ext_resource type="PackedScene" uid="uid://bvm7ocin62h7r" path="res://smooth_terrain/prop_lantern.tscn" id="14_md6sa"]

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_1vceu"]

[sub_resource type="Sky" id="1"]
sky_material = SubResource("PhysicalSkyMaterial_1vceu")

[sub_resource type="Environment" id="2"]
background_mode = 2
background_color = Color(1, 1, 1, 1)
sky = SubResource("1")
ambient_light_color = Color(0.427493, 0.42749307, 0.42749307, 1)
ambient_light_sky_contribution = 0.1
ambient_light_energy = 0.1
fog_enabled = true
fog_density = 0.0005
fog_aerial_perspective = 1.0
volumetric_fog_density = 0.005

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hlu6d"]
render_priority = 0
shader = ExtResource("2_oexva")
shader_parameter/u_transition_mask = 0
shader_parameter/u_voxel_virtual_texture_tile_size = 0
shader_parameter/u_voxel_virtual_texture_fade = 0.0
shader_parameter/u_voxel_cell_size = 0.0
shader_parameter/u_voxel_block_size = 0
shader_parameter/u_voxel_virtual_texture_offset_scale = Vector4(0, 0, 0, 0)
shader_parameter/u_lod_fade = Vector2(0, 0)
shader_parameter/u_texture_top = ExtResource("9_6c2kk")
shader_parameter/top_normal_map = ExtResource("5_1cem4")
shader_parameter/layer_depth = 10.0
shader_parameter/num_depth_textures = 3
shader_parameter/depth_textures = Array[Texture2D]([ExtResource("2_hlu6d"), ExtResource("2_erh7w"), ExtResource("4_erh7w")])
shader_parameter/depth_normal_maps = Array[Texture2D]([ExtResource("2_6c2kk"), ExtResource("3_md6sa"), ExtResource("4_tgnr8")])
shader_parameter/normal_strength = 2.0

[sub_resource type="VoxelGeneratorFlat" id="VoxelGeneratorFlat_erh7w"]

[sub_resource type="VoxelMesherTransvoxel" id="VoxelMesherTransvoxel_7pt3m"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_oexva"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_muprf"]
material = SubResource("StandardMaterial3D_oexva")
size = Vector3(1, 20, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_muprf"]
albedo_color = Color(0, 1, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_0eih8"]
material = SubResource("StandardMaterial3D_muprf")
size = Vector3(1, 20, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hlu6d"]
albedo_color = Color(0, 0, 1, 1)

[sub_resource type="BoxMesh" id="BoxMesh_erh7w"]
material = SubResource("StandardMaterial3D_hlu6d")
size = Vector3(1, 20, 1)

[node name="main" type="Node"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("2")

[node name="DirectionalLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.91212016, 3.5836575e-08, -0.40992305, 0.35500363, 0.5, 0.7899198, 0.204961, -0.8660251, 0.45606032, 14.4885, 6.21497, 0)
visible = false
layers = 3
shadow_enabled = true
shadow_blur = 0.5
directional_shadow_max_distance = 128.0

[node name="terrain" type="VoxelTerrain" parent="."]
bounds = AABB(-512, -512, -512, 1024, 1024, 1024)
material_override = SubResource("ShaderMaterial_hlu6d")
block_enter_notification_enabled = true
area_edit_notification_enabled = true
generator = SubResource("VoxelGeneratorFlat_erh7w")
mesher = SubResource("VoxelMesherTransvoxel_7pt3m")
render_layers_mask = 3
unique_name_in_owner = true
script = ExtResource("2_muprf")

[node name="VoxelTerrainMultiplayerSynchronizer" type="VoxelTerrainMultiplayerSynchronizer" parent="terrain"]

[node name="red" type="MeshInstance3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 64, 10, 64)
layers = 3
mesh = SubResource("BoxMesh_muprf")

[node name="green" type="MeshInstance3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 64, 10, -64)
layers = 3
mesh = SubResource("BoxMesh_0eih8")

[node name="blue" type="MeshInstance3D" parent="terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -64, 10, 64)
layers = 3
mesh = SubResource("BoxMesh_erh7w")

[node name="mp_spawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("uid://daole3dpr3ja2")
spawn_path = NodePath("../players")

[node name="players" type="Node3D" parent="."]
unique_name_in_owner = true
script = ExtResource("3_muprf")

[node name="MarginContainer" type="MarginContainer" parent="."]
z_index = 100
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -66.0
offset_right = 305.0
grow_vertical = 0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="multiplayer_menu" parent="MarginContainer" instance=ExtResource("4_oexva")]
layout_mode = 2

[node name="block" parent="." instance=ExtResource("5_muprf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 47.578, -49.8, 46.235)
size = Vector3(50, 100, 50)

[node name="prop_lantern" parent="." instance=ExtResource("14_md6sa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0141882, 0)
